<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Coffee Machine</title>
  <link rel="stylesheet" type="text/css" href="coffeeMachine.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
  <script src="js/coffeeScript.js" charset="utf-8"></script>
</head>

<body>
  <table align="center">
    <thead>
      <tr>
        <th id="displayText"><i class="fas fa-coffee" style="font-size:1.75em"></i><b>COFFEE MACHINE</b> <br> <i>How about a nice, warm cup of coffee?</i></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="menuOption1">
          <button id="button1" type="button" onclick="start()"> START </button></td>
        <td></td>
      </tr>
      <tr>
        <td id="menuOption2"></td>
        <td></td>
      </tr>
      <tr>
        <td id="menuOption3"></td>
        <td></td>
      </tr>
      <tr>
        <td id="menuOption4"></td>
        <td></td>
      </tr>
      <tr>
        <td id="menuOption5"></td>
        <td></td>
      </tr>
    </tbody>
  </table>



  <script type="text/javascript">
    var order, price, sugar, milk, offset, button1, button2, button3, button4, button5, button1Text, button2Text, button3Text, button4Text, button5Text;
    var display = document.getElementById("displayText");
    disappearButtons(2, 3, 4, 5);

    function start() {
      order = "";
      price = 0;
      sugar = 0;
      milk = 0;
      offset = 2000;

      displayOnScreen("Welcome to our world class coffee vending machine. It's good to see you!<br>");

      setTimeout(function() {
        displayOnScreen("<i class='fas fa-temperature-low' style='font-size:1.75em'>&nbsp;TEMP LOW</i>")
      }, 500 + offset);
      setTimeout(function() {
        displayOnScreen("")
      }, 1000 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-temperature-low' style='font-size:1.75em'>&nbsp;TEMP LOW</i>")
      }, 1500 + offset);
      setTimeout(function() {
        displayOnScreen("")
      }, 2000 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-thermometer-empty' style='font-size:1.75em'>&nbsp;WARMING UP 5s</i>")
      }, 3000 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-thermometer-quarter' style='font-size:1.75em'>&nbsp;WARMING UP 4s</i>")
      }, 4000 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-thermometer-half' style='font-size:1.75em'>&nbsp;WARMING UP 3s</i>")
      }, 5000 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-thermometer-three-quarters' style='font-size:1.75em'>&nbsp;WARMING UP 2s</i>")
      }, 6000 + offset);
      setTimeout(function() {
        displayOnScreen("")
      }, 6500 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-temperature-high' style='font-size:1.75em'>&nbsp;WARMING UP 1s</i>")
      }, 7000 + offset);
      setTimeout(function() {
        displayOnScreen("")
      }, 7500 + offset);
      setTimeout(function() {
        displayOnScreen("<i class='fas fa-temperature-high' style='font-size:1.75em'>&nbsp;READY TO SERVE</i><br><br> to continue press... 'Continue' ")
      }, 8000 + offset);
      setTimeout(function() {
        appearButtons(2);
      }, 8000 + offset);



      button1 = document.getElementById("button1");
      button1.innerHTML = "RETURN";
      button1.setAttribute("onclick", "backToStartMenu()");
      button1Text = document.getElementById("menuOption1").nextElementSibling;
      button1Text.innerHTML = "Press to exit...";
      button1Text.setAttribute("id", "button1Text");
      button1Text.setAttribute("class", "buttonText");

      button2 = document.createElement("button");
      button2.innerHTML = "CONTINUE";
      button2.setAttribute("id", "button2");
      button2.setAttribute("onclick", "continueToMenu()");
      document.getElementById('menuOption2').appendChild(button2);
      button2Text = document.getElementById("menuOption2").nextElementSibling;
      button2Text.innerHTML = "Press to continue...";
      button2Text.setAttribute("id", "button2Text");
      button2Text.setAttribute("class", "buttonText");

      button3 = document.createElement("button");
      button3.setAttribute("id", "button3");
      document.getElementById('menuOption3').appendChild(button3);
      button3Text = document.getElementById("menuOption3").nextElementSibling;
      button3Text.setAttribute("id", "button3Text");
      button3Text.setAttribute("class", "buttonText");

      button4 = document.createElement("button");
      button4.setAttribute("id", "button4");
      document.getElementById('menuOption4').appendChild(button4);
      button4Text = document.getElementById("menuOption4").nextElementSibling;
      button4Text.setAttribute("id", "button4Text");
      button4Text.setAttribute("class", "buttonText");

      button5 = document.createElement("button");
      button5.setAttribute("id", "button5");
      document.getElementById('menuOption5').appendChild(button5);
      button5Text = document.getElementById("menuOption5").nextElementSibling;
      button5Text.setAttribute("id", "button5Text");
      button5Text.setAttribute("class", "buttonText");

      disappearButtons(3, 4, 5);

    }

    function backToStartMenu() {
      window.location.reload();
    }

    function continueToMenu() {
      order = "";
      price = 0;
      sugar = 0;
      milk = 0;
      display.innerHTML =
        "Step 1: Select your beverage";
      appearButtons(2, 3, 4);
      disappearButtons(5);

      button1.innerHTML = "Café Latte";
      button1Text.innerHTML = "1.20 EUR";
      button1.setAttribute("onclick", "continueToStep2(1.20, 'Café Latte')");

      button2.innerHTML = "Cappuccino";
      button2Text.innerHTML = "1.00 EUR";
      button2.setAttribute("onclick", "continueToStep2(1.00, 'Cappuccino')");

      button3.innerHTML = "Espresso";
      button3.setAttribute("onclick", "continueToStep2(1.50, 'Espresso')");
      button3Text.innerHTML = "1.50 EUR";

      button4.innerHTML = "Long Black";
      button4.setAttribute("onclick", "continueToStep2(1.00, 'Long Blac')");
      button4Text.innerHTML = "1.00 EUR";

    }

    function continueToStep2(payment, orderName) {
      order = orderName;
      price = parseFloat(payment);
      display.innerHTML =
        "Step 2: Want to add sugar to your drink?";
      button1.innerHTML = "YES";
      button1Text.innerHTML = "...if you want it sweet";
      button1.setAttribute("onclick", "continueToStep2a()");
      button2.innerHTML = "NO";
      button2Text.innerHTML = "...nah, thanks!";
      button2.setAttribute("onclick", `continueToStep3('<i class="fas fa-times" style="font-size:1.5em"></i>')`);
      disappearButtons(3, 4);

    }

    function continueToStep2a() {
      display.innerHTML =
        "Step 2a: How sweet do you want it?";
      document.getElementById("menuOption3").parentElement.style.display = 'block';
      button1.innerHTML = "<i class='fas fa-utensil-spoon'></i>";
      button1Text.innerHTML = "it's gonna be sweet";
      button1.setAttribute("onclick", `continueToStep3(" <i class='fas fa-utensil-spoon'></i>")`);
      button2.innerHTML = "<i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i>";
      button2Text.innerHTML = "it's gonna be really sweet";
      button2.setAttribute("onclick", `continueToStep3(" <i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i>")`);
      button3.innerHTML = "<i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i>";
      button3Text.innerHTML = "it's gonna be awfully sweet";
      button3.setAttribute("onclick", `continueToStep3(" <i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i><i class='fas fa-utensil-spoon'></i>")`);
    }

    function continueToStep3(sugarAmm) {
      sugar = sugarAmm;
      display.innerHTML =
        "Step 3: Would you like to add some extra milk?";
      button1.innerHTML = "YES";
      button1Text.innerHTML = "add extra smoothness";
      button1.setAttribute("onclick", `continueToStep4('<i class="fas fa-check"></i>')`);
      button2.innerHTML = "NO";
      button2Text.innerHTML = "...nah, just make it hot!";
      button2.setAttribute("onclick", `continueToStep4('<i class="fas fa-times" style="font-size:1.5em"></i>')`);
      disappearButtons(3, 4);
    }

    function continueToStep4(milkAmm) {
      milk = milkAmm;
      display.innerHTML =
        "Step 4: Is your order correct? <p style='font-size:1.5em; margin:0; padding:0'>" + order + "</p> Sugar:" + sugar + " Extra Milk:" + milk + " TOTAL: " + parseFloat(price).toFixed(2) + "EUR";
      button1Text.innerHTML = "Validate the order& pay";
      button1.setAttribute("onclick", "continueToPayment(0)");
      button2Text.innerHTML = "Nope, that's not correct";
      button2.setAttribute("onclick", "continueToMenu()");
    }

    function continueToPayment(payment) {
      payment = parseFloat(payment);
      price = parseFloat(price);
      price = (price * 10 - payment * 10) / 10;
      if (price > 0) {
        appearButtons(3, 4, 5);
        display.innerHTML =
          "PAYMENT TOTAL: " + price + " EUR<br>Please insert coins<br>Accepted coins: 10c,20c,50c,1EUR,2EUR";

        button1.innerHTML = "10 cents";
        button2.innerHTML = "20 cents";
        button3.innerHTML = "50 cents";
        button4.innerHTML = "1.00 EURO";
        button5.innerHTML = "2.00 EUROS";
        button1Text.innerHTML = "10 cents";
        button2Text.innerHTML = "20 cents";
        button3Text.innerHTML = "50 cents";
        button4Text.innerHTML = "1 EURO";
        button5Text.innerHTML = "2 EUROS";
        button1.setAttribute("onclick", "continueToPayment(0.10)");
        button2.setAttribute("onclick", "continueToPayment(0.20)");
        button3.setAttribute("onclick", "continueToPayment(0.50)");
        button4.setAttribute("onclick", "continueToPayment(1.00)");
        button5.setAttribute("onclick", "continueToPayment(2.00)");
      } else {
        var change = -price;
        disappearButtons(1, 2);
        if (price != 0) {
          displayOnScreen("<i class='fas fa-globe-africa' style='font-size:1.75em'>4</i><br>Your beverage is on it\'s way!....");
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-americas' style='font-size:1.75em'>3</i><br>Your beverage is on it\'s way!...")
          }, 2000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-asia' style='font-size:1.75em'>2</i><br>Your beverage is on it\'s way!..")
          }, 4000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-europe' style='font-size:1.75em'>1</i><br>Your beverage is on it\'s way!.")
          }, 6000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-mug-hot' style='font-size:1.75em'></i> Here\'s your hot beverage and your change : " + parseFloat(change).toFixed(2) + "EUR. <br><h4>Have a great day! See you soon</h4>")
          }, 8000);
          setTimeout(function() {
            appearButtons(1, 2);
          }, 8000);
        } else {
          displayOnScreen("<i class='fas fa-globe-africa' style='font-size:1.75em'>4</i><br>Your beverage is on it\'s way!....");
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-americas' style='font-size:1.75em'>3</i><br>Your beverage is on it\'s way!...")
          }, 2000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-asia' style='font-size:1.75em'>2</i><br>Your beverage is on it\'s way!..")
          }, 4000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-globe-europe' style='font-size:1.75em'>1</i><br>Your beverage is on it\'s way!.")
          }, 6000);
          setTimeout(function() {
            displayOnScreen("<i class='fas fa-mug-hot' style='font-size:1.75em'></i>&nbsp;Here\'s your hot beverage, enjoy!<br><h4>See you soon</h4>")
          }, 8000);
          setTimeout(function() {
            appearButtons(1, 2);
          }, 8000);
        }
        button1.innerHTML = "EXIT";
        button1Text.innerHTML = "Bye!";
        button1.setAttribute("onclick", "backToStartMenu()");
        button2.innerHTML = "ONE MORE";
        button2Text.innerHTML = "To main menu";
        button2.setAttribute("onclick", "continueToMenu()");
        disappearButtons(3, 4, 5);
      }
    }
  </script>
</body>

</html>
